# ===================================================
# Default configuration for TC-MMWM
# This file contains global defaults for training,
# evaluation, and deployment. Other YAML files
# can override specific sections.
# ===================================================

# -----------------------------
# General settings
# -----------------------------
project_name: "TC-MMWM"
seed: 42                       # Random seed for reproducibility
device: "cuda"                 # Default device: 'cuda' or 'cpu'
num_workers: 8                 # DataLoader workers

# -----------------------------
# Data settings
# -----------------------------
data:
  # Paths
  dataset_root: "data/"
  simulated_dir: "data/simulated"
  real_robot_dir: "data/real_robot"
  splits_dir: "data/splits"
  
  # Batch settings
  batch_size: 32
  shuffle: True

  # Preprocessing defaults
  vision:
    input_size: [128, 128, 3]        # H x W x C
    normalize_mean: [0.485, 0.456, 0.406]
    normalize_std: [0.229, 0.224, 0.225]

  language:
    max_tokens: 64
    embedding_dim: 256

  sensors:
    num_channels: 10                 # Total sensor channels (e.g., joint positions, forces)
    normalize: True

# -----------------------------
# Model settings
# -----------------------------
model:
  latent_dim: 128
  vision_encoder_type: "resnet18"   # Options: 'resnet18', 'resnet34', 'vit_small'
  language_encoder_type: "transformer"
  sensor_encoder_type: "mlp"
  causal_composition: "weighted_sum"  # Other options could include 'attention', 'concat'
  transition_model: "mlp"
  counterfactual_steps: 5

# -----------------------------
# Training settings
# -----------------------------
training:
  epochs: 200
  optimizer: "adam"
  learning_rate: 0.0003
  weight_decay: 0.0
  grad_clip_norm: 5.0

# -----------------------------
# Loss weights
# -----------------------------
loss_weights:
  state_prediction: 1.0
  action_consistency: 1.0
  constraint_violation: 2.0
  latent_smoothness: 0.5

# -----------------------------
# Evaluation defaults
# -----------------------------
evaluation:
  metrics:
    task_success: True
    long_horizon_stability: True
    ood_generalization: True
    language_compliance: True
    robustness_to_noise: True

  num_eval_episodes: 50

# -----------------------------
# Logging / Checkpoints
# -----------------------------
logging:
  log_dir: "experiments/results/logs"
  save_checkpoint_every: 10         # Save every N epochs
  checkpoint_dir: "experiments/checkpoints"
  tensorboard: True

# -----------------------------
# Simulation-to-Real (sim2real) defaults
# -----------------------------
sim2real:
  domain_randomization: True
  randomize_textures: True
  randomize_lighting: True
  randomize_physics: True
  latent_regularization: True

